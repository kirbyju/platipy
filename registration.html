<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Utilities" href="utils.html" /><link rel="prev" title="Command Line Tools" href="cli.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>Registration - PlatiPy documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">PlatiPy  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">PlatiPy  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cardiac.html">Cardiac Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/bronchus_segmentation.html">Bronchus Segmentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_examples/visualise.html">Visualise Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/atlas_segmentation.html">Atlas Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/contour_comparison.html">Contour Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/dvh_analysis.html">DVH Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="_examples/left_ventricle_17_segments.html">Cardiac LV 17-segment model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="visualiser.html">Image Visualiser</a></li>
<li class="toctree-l1"><a class="reference internal" href="dicom.html">DICOM Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="dose.html">Dose</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Tools</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="registration">
<h1>Registration<a class="headerlink" href="#registration" title="Permalink to this heading">#</a></h1>
<section id="module-platipy.imaging.registration.deformable">
<span id="deformable-image-registration"></span><h2>Deformable Image Registration<a class="headerlink" href="#module-platipy.imaging.registration.deformable" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.deformable.bspline_registration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.deformable.</span></span><span class="sig-name descname"><span class="pre">bspline_registration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixed_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution_staging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[8,</span> <span class="pre">4,</span> <span class="pre">2]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_sigmas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[4,</span> <span class="pre">2,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimiser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LBFGS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean_squares'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_grid_spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_scale_factors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">4]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">23</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isotropic_resample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_isotropic_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_histogram_bins_mi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.deformable.bspline_registration" title="Permalink to this definition">#</a></dt>
<dd><p>B-Spline image registration using ITK</p>
<p>IMPORTANT - THIS IS UNDER ACTIVE DEVELOPMENT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixed_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The fixed (target/primary) image.</p></li>
<li><p><strong>moving_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The moving (secondary) image.</p></li>
<li><p><strong>fixed_structure</strong> (<em>bool</em><em>, </em><em>optional</em>) – If defined, a binary SimpleITK.Image used to mask metric
evaluation for the moving image. Defaults to False.</p></li>
<li><p><strong>moving_structure</strong> (<em>bool</em><em>, </em><em>optional</em>) – If defined, a binary SimpleITK.Image used to mask metric
evaluation for the fixed image. Defaults to False.</p></li>
<li><p><strong>resolution_staging</strong> (<em>list</em><em>, </em><em>optional</em>) – The multi-resolution downsampling factors.
Defaults to [8, 4, 2].</p></li>
<li><p><strong>smooth_sigmas</strong> (<em>list</em><em>, </em><em>optional</em>) – The multi-resolution smoothing kernel scale (Gaussian).
Defaults to [4, 2, 1].</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em><em>, </em><em>optional</em>) – The fraction of voxels sampled during each iteration.
Defaults to 0.1.</p></li>
<li><p><strong>optimiser</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The optimiser algorithm used for image registration.
Available options:</p>
<blockquote>
<div><ul>
<li><p>LBFSGS
(limited-memory Broyden–Fletcher–Goldfarb–Shanno (bounded).)</p></li>
<li><p>LBFSG
(limited-memory Broyden–Fletcher–Goldfarb–Shanno
(unbounded).)</p></li>
<li><p>CGLS (conjugate gradient line search)</p></li>
<li><p>gradient_descent</p></li>
<li><p>gradient_descent_line_search</p></li>
</ul>
</div></blockquote>
<p>Defaults to “LBFGS”.</p>
</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The metric to be optimised during image registration.
Available options:</p>
<blockquote>
<div><ul>
<li><p>correlation</p></li>
<li><p>mean_squares</p></li>
<li><p>demons</p></li>
<li><p>mutual_information
(used with parameter number_of_histogram_bins_mi)</p></li>
</ul>
</div></blockquote>
<p>Defaults to “mean_squares”.</p>
</p></li>
<li><p><strong>initial_grid_spacing</strong> (<em>int</em><em>, </em><em>optional</em>) – Grid spacing of lower resolution stage (in mm).
Defaults to 64.</p></li>
<li><p><strong>grid_scale_factors</strong> (<em>list</em><em>, </em><em>optional</em>) – Factors to determine grid spacing at each
multiresolution stage.
Defaults to [1, 2, 4].</p></li>
<li><p><strong>interp_order</strong> (<em>int</em><em>, </em><em>optional</em>) – Interpolation order of final resampling.
Defaults to sitk.sitkBSpline (cubic).</p></li>
<li><p><strong>default_value</strong> (<em>int</em><em>, </em><em>optional</em>) – Default image value. Defaults to -1000.</p></li>
<li><p><strong>number_of_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of iterations at each resolution stage.
Defaults to 20.</p></li>
<li><p><strong>isotropic_resample</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag whether to resample to isotropic resampling
prior to registration.
Defaults to False.</p></li>
<li><p><strong>initial_isotropic_size</strong> (<em>int</em><em>, </em><em>optional</em>) – Voxel size (in mm) of resampled isotropic image
(if used). Defaults to 1.</p></li>
<li><p><strong>number_of_histogram_bins_mi</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of histogram bins used when calculating
mutual information. Defaults to 30.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Print image registration process information. Defaults to False.</p></li>
<li><p><strong>ncores</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of CPU cores used. Defaults to 8.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The registered moving (secondary) image.
[SimleITK.Transform]: The linear transformation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[SimpleITK.Image]</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><dl class="simple">
<dt>smooth_sigmas are relative to resolution staging</dt><dd><p>e.g. for image spacing of 1x1x1 mm^3, with smooth sigma=2 and resolution_staging=4, the
scale of the Gaussian filter would be 2x4 = 8mm (i.e. 8x8x8 mm^3)</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.deformable.fast_symmetric_forces_demons_registration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.deformable.</span></span><span class="sig-name descname"><span class="pre">fast_symmetric_forces_demons_registration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixed_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution_staging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[8,</span> <span class="pre">4,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration_staging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[10,</span> <span class="pre">10,</span> <span class="pre">10]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isotropic_resample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_displacement_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regularisation_kernel_mm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_sigma_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_sigmas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.deformable.fast_symmetric_forces_demons_registration" title="Permalink to this definition">#</a></dt>
<dd><p>Deformable image propagation using Fast Symmetric-Forces Demons</p>
<dl>
<dt>Args</dt><dd><p>fixed_image (sitk.Image)        : the fixed image
moving_image (sitk.Image)       : the moving image, to be deformable registered (must be in</p>
<blockquote>
<div><p>the same image space)</p>
</div></blockquote>
<p>resolution_staging (list[int])   : down-sampling factor for each resolution level
iteration_staging (list[int])    : number of iterations for each resolution level
isotropic_resample (bool)        : flag to request isotropic resampling of images, in which</p>
<blockquote>
<div><p>case resolution_staging is used to define voxel size
(mm) per level</p>
</div></blockquote>
<p>initial_displacement_field (sitk.Image) : Initial displacement field to use
regularisation_kernel_scale (float) : Relative scale (var/voxel size) of the regularisation kernel (Gaussian)
ncores (int)                    : number of processing cores to use
smoothing_sigma_factor (float)    : the relative width of the Gaussian smoothing kernel
interp_order (int)               : the interpolation order</p>
<blockquote>
<div><p>1 = Nearest neighbour
2 = Bi-linear splines
3 = B-Spline (cubic)</p>
</div></blockquote>
<p>default_value (float) : Default voxel value. Defaults to 0 unless image is CT-like.</p>
</dd>
<dt>Returns</dt><dd><p>registered_image (sitk.Image)    : the registered moving image
output_transform                 : the displacement field transform
[optional] deformation_field</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.deformable.multiscale_demons">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.deformable.</span></span><span class="sig-name descname"><span class="pre">multiscale_demons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registration_algorithm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_displacement_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isotropic_resample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution_staging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_sigmas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration_staging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.deformable.multiscale_demons" title="Permalink to this definition">#</a></dt>
<dd><p>Run the given registration algorithm in a multiscale fashion. The original scale should not be
given as input as the original images are implicitly incorporated as the base of the pyramid.
:param registration_algorithm: Any registration algorithm that has an Execute(fixed_image,</p>
<blockquote>
<div><p>moving_image, displacement_field_image) method.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixed_image</strong> – Resulting transformation maps points from this image’s spatial domain to the
moving image spatial domain.</p></li>
<li><p><strong>moving_image</strong> – Resulting transformation maps points from the fixed_image’s spatial domain to
this image’s spatial domain.</p></li>
<li><p><strong>initial_transform</strong> – Any SimpleITK transform, used to initialize the displacement field.</p></li>
<li><p><strong>initial_displacement_field</strong> – Initial displacement field, if this is provided
initial_transform will be ignored</p></li>
<li><p><strong>shrink_factors</strong> – Shrink factors relative to the original image’s size.</p></li>
<li><p><strong>smoothing_sigmas</strong> – Amount of smoothing which is done prior to resmapling the image using the
given shrink factor. These are in physical (image spacing) units.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>SimpleITK.DisplacementFieldTransform
[Optional] Displacemment (vector) field</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-platipy.imaging.registration.linear">
<span id="rigid-registration"></span><h2>Rigid Registration<a class="headerlink" href="#module-platipy.imaging.registration.linear" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.linear.alignment_registration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.linear.</span></span><span class="sig-name descname"><span class="pre">alignment_registration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixed_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.linear.alignment_registration" title="Permalink to this definition">#</a></dt>
<dd><p>A simple registration procedure that can align images in a single step.
Uses the image centres-of-mass (and optionally second moments) to
estimate the shift (and rotation) needed for alignment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixed_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The fixed (target/primary) image.</p></li>
<li><p><strong>moving_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The moving (secondary) image.</p></li>
<li><p><strong>moments</strong> (<em>bool</em><em>, </em><em>optional</em>) – Option to align images using the second moment. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The registered moving (secondary) image.
[SimleITK.Transform]: The linear transformation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[SimpleITK.Image]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.linear.linear_registration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.linear.</span></span><span class="sig-name descname"><span class="pre">linear_registration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixed_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'similarity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean_squares'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimiser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gradient_descent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shrink_factors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[8,</span> <span class="pre">2,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_sigmas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[4,</span> <span class="pre">2,</span> <span class="pre">0]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_interp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.linear.linear_registration" title="Permalink to this definition">#</a></dt>
<dd><p>Initial linear registration between two images.
The images are not required to be in the same space.
There are several transforms available, with options for the metric and optimiser to be used.
Note the default_value, which should be set to match the image modality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixed_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The fixed (target/primary) image.</p></li>
<li><p><strong>moving_image</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The moving (secondary) image.</p></li>
<li><p><strong>fixed_structure</strong> (<em>bool</em><em>, </em><em>optional</em>) – If defined, a binary SimpleITK.Image used to mask metric
evaluation for the moving image. Defaults to False.</p></li>
<li><p><strong>moving_structure</strong> (<em>bool</em><em>, </em><em>optional</em>) – If defined, a binary SimpleITK.Image used to mask metric
evaluation for the fixed image. Defaults to False.</p></li>
<li><p><strong>reg_method</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The linear transformtation model to be used for image
registration.
Available options:</p>
<blockquote>
<div><ul>
<li><p>translation</p></li>
<li><p>rigid</p></li>
<li><p>similarity</p></li>
<li><p>affine</p></li>
<li><p>scale</p></li>
<li><p>scaleversor</p></li>
<li><p>scaleskewversor</p></li>
</ul>
</div></blockquote>
<p>Defaults to “Similarity”.</p>
</p></li>
<li><p><strong>metric</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The metric to be optimised during image registration.
Available options:</p>
<blockquote>
<div><ul>
<li><p>correlation</p></li>
<li><p>mean_squares</p></li>
<li><p>mattes_mi</p></li>
<li><p>joint_hist_mi</p></li>
</ul>
</div></blockquote>
<p>Defaults to “mean_squares”.</p>
</p></li>
<li><p><strong>optimiser</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>The optimiser algorithm used for image registration.
Available options:</p>
<blockquote>
<div><ul>
<li><p>lbfgsb
(limited-memory Broyden–Fletcher–Goldfarb–Shanno (bounded).)</p></li>
<li><p>gradient_descent</p></li>
<li><p>gradient_descent_line_search</p></li>
</ul>
</div></blockquote>
<p>Defaults to “gradient_descent”.</p>
</p></li>
<li><p><strong>shrink_factors</strong> (<em>list</em><em>, </em><em>optional</em>) – The multi-resolution downsampling factors.
Defaults to [8, 2, 1].</p></li>
<li><p><strong>smooth_sigmas</strong> (<em>list</em><em>, </em><em>optional</em>) – The multi-resolution smoothing kernel scale (Gaussian).
Defaults to [4, 2, 0].</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em><em>, </em><em>optional</em>) – The fraction of voxels sampled during each iteration.
Defaults to 0.25.</p></li>
<li><p><strong>ants_radius</strong> (<em>int</em><em>, </em><em>optional</em>) – Used is the metric is set as “ants_radius”. Defaults to 3.</p></li>
<li><p><strong>final_interp</strong> (<em>int</em><em>, </em><em>optional</em>) – The final interpolation order. Defaults to 2 (linear).</p></li>
<li><p><strong>number_of_iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of iterations in each multi-resolution step.
Defaults to 50.</p></li>
<li><p><strong>default_value</strong> (<em>int</em><em>, </em><em>optional</em>) – Default voxel value. Defaults to 0 unless image is CT-like.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Print image registration process information. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The registered moving (secondary) image.
[SimleITK.Transform]: The linear transformation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[SimpleITK.Image]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-platipy.imaging.registration.utils">
<span id="registration-utils"></span><h2>Registration Utils<a class="headerlink" href="#module-platipy.imaging.registration.utils" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.apply_deformable_transform">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">apply_deformable_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.apply_deformable_transform" title="Permalink to this definition">#</a></dt>
<dd><p>Helper function for applying deformable transforms.</p>
<dl>
<dt>Args</dt><dd><p>input_image (SimpleITK.Image): The image, to which the transform is applied
reference_image (SimpleITK.Image): The image will be resampled into this reference space.
transform (SimpleITK.Transform): The transformation
is_structure (bool): Will set appropriate parameters for transforming labels/structures.
default_value: Default (background) value. Defaults to 0.
interpolator (int, optional): The interpolation order.</p>
<blockquote>
<div><dl class="simple">
<dt>Available options:</dt><dd><ul class="simple">
<li><p>SimpleITK.sitkNearestNeighbor</p></li>
<li><p>SimpleITK.sitkLinear</p></li>
<li><p>SimpleITK.sitkBSpline</p></li>
</ul>
</dd>
</dl>
<p>Defaults to SimpleITK.sitkNearestNeighbor</p>
</div></blockquote>
</dd>
<dt>Returns</dt><dd><p>(SimpleITK.Image): the transformed image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.apply_linear_transform">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">apply_linear_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.apply_linear_transform" title="Permalink to this definition">#</a></dt>
<dd><p>Helper function for applying linear transforms.</p>
<dl>
<dt>Args</dt><dd><p>input_image (SimpleITK.Image): The image, to which the transform is applied
reference_image (SimpleITK.Image): The image will be resampled into this reference space.
transform (SimpleITK.Transform): The transformation
is_structure (bool): Will set appropriate parameters for transforming labels/structures.
default_value: Default (background) value. Defaults to 0.
interpolator (int, optional): The interpolation order.</p>
<blockquote>
<div><dl class="simple">
<dt>Available options:</dt><dd><ul class="simple">
<li><p>SimpleITK.sitkNearestNeighbor</p></li>
<li><p>SimpleITK.sitkLinear</p></li>
<li><p>SimpleITK.sitkBSpline</p></li>
</ul>
</dd>
</dl>
<p>Defaults to SimpleITK.sitkNearestNeighbor</p>
</div></blockquote>
</dd>
<dt>Returns</dt><dd><p>(SimpleITK.Image): the transformed image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.apply_transform">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">apply_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.apply_transform" title="Permalink to this definition">#</a></dt>
<dd><p>Transform a volume of structure with the given deformation field.</p>
<dl>
<dt>Args</dt><dd><p>input_image (SimpleITK.Image): The image, to which the transform is applied
reference_image (SimpleITK.Image): The image will be resampled into this reference space.
transform (SimpleITK.Transform): The transformation
default_value: Default (background) value. Defaults to 0.
interpolator (int, optional): The interpolation order.</p>
<blockquote>
<div><dl class="simple">
<dt>Available options:</dt><dd><ul class="simple">
<li><p>SimpleITK.sitkNearestNeighbor</p></li>
<li><p>SimpleITK.sitkLinear</p></li>
<li><p>SimpleITK.sitkBSpline</p></li>
</ul>
</dd>
</dl>
<p>Defaults to SimpleITK.sitkNearestNeighbor</p>
</div></blockquote>
</dd>
<dt>Returns</dt><dd><p>(SimpleITK.Image): the transformed image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.control_point_spacing_distance_to_number">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">control_point_spacing_distance_to_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_spacing</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.control_point_spacing_distance_to_number" title="Permalink to this definition">#</a></dt>
<dd><p>Convert grid spacing specified in distance to number of control points</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.convert_mask_to_distance_map">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">convert_mask_to_distance_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squared_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.convert_mask_to_distance_map" title="Permalink to this definition">#</a></dt>
<dd><p>Generate a distance map from a binary label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – A binary label.</p></li>
<li><p><strong>squared_distance</strong> (<em>bool</em><em>, </em><em>optional</em>) – Option to use the squared distance. Defaults to False.</p></li>
<li><p><strong>normalise</strong> (<em>bool</em><em>, </em><em>optional</em>) – Normalise output to [0,1]. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The distance map as an image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[SimpleITK.Image]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.convert_mask_to_reg_structure">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">convert_mask_to_reg_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expansion=(0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.convert_mask_to_reg_structure" title="Permalink to this definition">#</a></dt>
<dd><p>Generate a mask-like image to make structure-guided registration more
realistic via internal deformation within a binary mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<em>[</em><em>SimpleITK.Image</em><em>]</em>) – The binary label.</p></li>
<li><p><strong>expansion</strong> (<em>int</em><em>, </em><em>optional</em>) – For improved smoothness on the surface
(particularly complex structures) it will
often help to use some binary dilation. This
parameter defines the expansion in mm.
Defaults to 1.</p></li>
<li><p><strong>scale</strong> (<em>[</em><em>function</em><em>]</em><em>, </em><em>optional</em>) – Defines scaling to the distance map.
For example: lambda x:sitk.Log(x).
Defaults to lambda x:x.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[description]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[SimpleITK.Image]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.deformable_registration_command_iteration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">deformable_registration_command_iteration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.deformable_registration_command_iteration" title="Permalink to this definition">#</a></dt>
<dd><p>Utility function to print information during demons registration</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.registration_command_iteration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">registration_command_iteration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.registration_command_iteration" title="Permalink to this definition">#</a></dt>
<dd><p>Utility function to print information during (rigid, similarity, translation, B-splines)
registration</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.smooth_and_resample">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">smooth_and_resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isotropic_voxel_size_mm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shrink_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.smooth_and_resample" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>SimpleITK.Image</em>) – The image we want to resample.</p></li>
<li><p><strong>isotropic_voxel_size_mm</strong> (<em>float</em><em> | </em><em>None</em>) – New voxel size in millimetres</p></li>
<li><p><strong>shrink_factor</strong> (<em>list</em><em> | </em><em>float</em>) – A number greater than one, such that the new image’s size is
original_size/shrink_factor. Can also be specified independently for each
dimension (sagittal, coronal, axial).</p></li>
<li><p><strong>smoothing_sigma</strong> (<em>list</em><em> | </em><em>float</em>) – Scale for Gaussian smoothing, this is in physical
(image spacing) units, not pixels. Can also be specified independently for
each dimension (sagittal, coronal, axial).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Image which is a result of smoothing the input and then resampling
it using the specified Gaussian kernel and shrink factor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>SimpleITK.Image</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="platipy.imaging.registration.utils.stage_iteration">
<span class="sig-prename descclassname"><span class="pre">platipy.imaging.registration.utils.</span></span><span class="sig-name descname"><span class="pre">stage_iteration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#platipy.imaging.registration.utils.stage_iteration" title="Permalink to this definition">#</a></dt>
<dd><p>Utility function to print information during stage change in registration</p>
</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="utils.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Utilities</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="cli.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Command Line Tools</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Ingham Institute, University of New South Wales, University of Sydney
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Registration</a><ul>
<li><a class="reference internal" href="#module-platipy.imaging.registration.deformable">Deformable Image Registration</a><ul>
<li><a class="reference internal" href="#platipy.imaging.registration.deformable.bspline_registration"><code class="docutils literal notranslate"><span class="pre">bspline_registration()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.deformable.fast_symmetric_forces_demons_registration"><code class="docutils literal notranslate"><span class="pre">fast_symmetric_forces_demons_registration()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.deformable.multiscale_demons"><code class="docutils literal notranslate"><span class="pre">multiscale_demons()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-platipy.imaging.registration.linear">Rigid Registration</a><ul>
<li><a class="reference internal" href="#platipy.imaging.registration.linear.alignment_registration"><code class="docutils literal notranslate"><span class="pre">alignment_registration()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.linear.linear_registration"><code class="docutils literal notranslate"><span class="pre">linear_registration()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-platipy.imaging.registration.utils">Registration Utils</a><ul>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.apply_deformable_transform"><code class="docutils literal notranslate"><span class="pre">apply_deformable_transform()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.apply_linear_transform"><code class="docutils literal notranslate"><span class="pre">apply_linear_transform()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.apply_transform"><code class="docutils literal notranslate"><span class="pre">apply_transform()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.control_point_spacing_distance_to_number"><code class="docutils literal notranslate"><span class="pre">control_point_spacing_distance_to_number()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.convert_mask_to_distance_map"><code class="docutils literal notranslate"><span class="pre">convert_mask_to_distance_map()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.convert_mask_to_reg_structure"><code class="docutils literal notranslate"><span class="pre">convert_mask_to_reg_structure()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.deformable_registration_command_iteration"><code class="docutils literal notranslate"><span class="pre">deformable_registration_command_iteration()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.registration_command_iteration"><code class="docutils literal notranslate"><span class="pre">registration_command_iteration()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.smooth_and_resample"><code class="docutils literal notranslate"><span class="pre">smooth_and_resample()</span></code></a></li>
<li><a class="reference internal" href="#platipy.imaging.registration.utils.stage_iteration"><code class="docutils literal notranslate"><span class="pre">stage_iteration()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>